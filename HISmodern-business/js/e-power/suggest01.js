if(!Suggest){var Suggest={}}Suggest.Key={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40};Suggest.copyProperties=function(a,c){for(var b in c){a[b]=c[b]}return a};Suggest.Local=function(){this.initialize.apply(this,arguments)};Suggest.Local.prototype={initialize:function(b,d,c){this.input=this._getElement(b);this.suggestArea=this._getElement(d);this.candidateList=c;this.oldText=this.getInputText();if(arguments[3]){this.setOptions(arguments[3])}this._addEvent(this.input,"focus",this._bind(this.checkLoop));this._addEvent(this.input,"blur",this._bind(this.inputBlur));var a="keydown";if(window.opera||(navigator.userAgent.indexOf("Gecko")>=0&&navigator.userAgent.indexOf("KHTML")==-1)){a="keypress"}this._addEvent(this.input,a,this._bindEvent(this.keyEvent));this.clearSuggestArea()},interval:500,dispMax:20,listTagName:"div",prefix:false,ignoreCase:true,highlight:false,dispAllKey:false,classMouseOver:"over",classSelect:"select",hookBeforeSearch:function(){},setOptions:function(a){Suggest.copyProperties(this,a)},inputBlur:function(){this.changeUnactive();this.oldText=this.getInputText();if(this.timerId){clearTimeout(this.timerId)}this.timerId=null;setTimeout(this._bind(this.clearSuggestArea),500)},checkLoop:function(){var a=this.getInputText();if(a!=this.oldText){this.oldText=a;this.search()}if(this.timerId){clearTimeout(this.timerId)}this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)},search:function(){this.clearSuggestArea();var b=this.getInputText();if(b==""||b==null){return}this.hookBeforeSearch(b);var a=this._search(b);if(a.length!=0){this.createSuggestArea(a)}},_search:function(e){var b=[];var a;this.suggestIndexList=[];for(var c=0,d=this.candidateList.length;c<d;c++){if((a=this.isMatch(this.candidateList[c],e))!=null){b.push(a);this.suggestIndexList.push(c);if(this.dispMax!=0&&b.length>=this.dispMax){break}}}return b},isMatch:function(b,a){if(b==null){return null}var c=(this.ignoreCase)?b.toLowerCase().indexOf(a.toLowerCase()):b.indexOf(a);if((c==-1)||(this.prefix&&c!=0)){return null}if(this.highlight){return(this._escapeHTML(b.substr(0,c))+"<strong>"+this._escapeHTML(b.substr(c,a.length))+"</strong>"+this._escapeHTML(b.substr(c+a.length)))}else{return this._escapeHTML(b)}},clearSuggestArea:function(){this.suggestArea.innerHTML="";this.suggestArea.style.display="none";this.suggestList=null;this.suggestIndexList=null;this.activePosition=null},createSuggestArea:function(a){this.suggestList=[];this.inputValueBackup=this.input.value;for(var c=0,d=a.length;c<d;c++){var b=document.createElement(this.listTagName);b.innerHTML=a[c];this.suggestArea.appendChild(b);this._addEvent(b,"click",this._bindEvent(this.listClick,c));this._addEvent(b,"mouseover",this._bindEvent(this.listMouseOver,c));this._addEvent(b,"mouseout",this._bindEvent(this.listMouseOut,c));this.suggestList.push(b)}this.suggestArea.style.display="";this.suggestArea.scrollTop=0},getInputText:function(){return this.input.value},setInputText:function(a){this.input.value=a},keyEvent:function(a){if(!this.timerId){this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)}if(this.dispAllKey&&a.ctrlKey&&this.getInputText()==""&&!this.suggestList&&a.keyCode==Suggest.Key.DOWN){this._stopEvent(a);this.keyEventDispAll()}else{if(a.keyCode==Suggest.Key.UP||a.keyCode==Suggest.Key.DOWN){if(this.suggestList&&this.suggestList.length!=0){this._stopEvent(a);this.keyEventMove(a.keyCode)}}else{if(a.keyCode==Suggest.Key.RETURN){if(this.suggestList&&this.suggestList.length!=0){this._stopEvent(a);this.keyEventReturn()}}else{if(a.keyCode==Suggest.Key.ESC){if(this.suggestList&&this.suggestList.length!=0){this._stopEvent(a);this.keyEventEsc()}}else{this.keyEventOther(a)}}}}},keyEventDispAll:function(){this.clearSuggestArea();this.oldText=this.getInputText();this.suggestIndexList=[];for(var a=0,b=this.candidateList.length;a<b;a++){this.suggestIndexList.push(a)}this.createSuggestArea(this.candidateList)},keyEventMove:function(a){this.changeUnactive();if(a==Suggest.Key.UP){if(this.activePosition==null){this.activePosition=this.suggestList.length-1}else{this.activePosition--;if(this.activePosition<0){this.activePosition=null;this.input.value=this.inputValueBackup;this.suggestArea.scrollTop=0;return}}}else{if(this.activePosition==null){this.activePosition=0}else{this.activePosition++}if(this.activePosition>=this.suggestList.length){this.activePosition=null;this.input.value=this.inputValueBackup;this.suggestArea.scrollTop=0;return}}this.changeActive(this.activePosition)},keyEventReturn:function(){this.clearSuggestArea();this.moveEnd()},keyEventEsc:function(){this.clearSuggestArea();this.input.value=this.inputValueBackup;this.oldText=this.getInputText();if(window.opera){setTimeout(this._bind(this.moveEnd),5)}},keyEventOther:function(a){},changeActive:function(a){this.setStyleActive(this.suggestList[a]);this.setInputText(this.candidateList[this.suggestIndexList[a]]);this.oldText=this.getInputText();this.input.focus()},changeUnactive:function(){if(this.suggestList!=null&&this.suggestList.length>0&&this.activePosition!=null){this.setStyleUnactive(this.suggestList[this.activePosition])}},listClick:function(b,a){this.changeUnactive();this.activePosition=a;this.changeActive(a);this.moveEnd()},listMouseOver:function(b,a){this.setStyleMouseOver(this._getEventElement(b))},listMouseOut:function(c,a){if(!this.suggestList){return}var b=this._getEventElement(c);if(a==this.activePosition){this.setStyleActive(b)}else{this.setStyleUnactive(b)}},setStyleActive:function(b){b.className=this.classSelect;var c=b.offsetTop;var a=c+b.clientHeight;if(this.suggestArea.scrollTop>c){this.suggestArea.scrollTop=c}else{if(this.suggestArea.scrollTop+this.suggestArea.clientHeight<a){this.suggestArea.scrollTop=a-this.suggestArea.clientHeight}}},setStyleUnactive:function(a){a.className=""},setStyleMouseOver:function(a){a.className=this.classMouseOver},moveEnd:function(){if(this.input.createTextRange){this.input.focus();var a=this.input.createTextRange();a.move("character",this.input.value.length);a.select()}else{if(this.input.setSelectionRange){this.input.setSelectionRange(this.input.value.length,this.input.value.length)}}},_getElement:function(a){return(typeof a=="string")?document.getElementById(a):a},_addEvent:(window.addEventListener?function(a,b,c){a.addEventListener(b,c,false)}:function(a,b,c){a.attachEvent("on"+b,c)}),_stopEvent:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}},_getEventElement:function(a){return a.target||a.srcElement},_bind:function(c){var a=this;var b=Array.prototype.slice.call(arguments,1);return function(){c.apply(a,b)}},_bindEvent:function(c){var a=this;var b=Array.prototype.slice.call(arguments,1);return function(d){d=d||window.event;c.apply(a,[d].concat(b))}},_escapeHTML:function(a){return a.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}};Suggest.LocalMulti=function(){this.initialize.apply(this,arguments)};Suggest.copyProperties(Suggest.LocalMulti.prototype,Suggest.Local.prototype);Suggest.LocalMulti.prototype.delim=" ";Suggest.LocalMulti.prototype.keyEventReturn=function(){this.clearSuggestArea();this.input.value+=this.delim;this.moveEnd()};Suggest.LocalMulti.prototype.keyEventOther=function(a){if(a.keyCode==Suggest.Key.TAB){if(this.suggestList&&this.suggestList.length!=0){this._stopEvent(a);if(!this.activePosition){this.activePosition=0;this.changeActive(this.activePosition)}this.clearSuggestArea();this.input.value+=this.delim;if(window.opera){setTimeout(this._bind(this.moveEnd),5)}else{this.moveEnd()}}}};Suggest.LocalMulti.prototype.listClick=function(b,a){this.changeUnactive();this.activePosition=a;this.changeActive(a);this.input.value+=this.delim;this.moveEnd()};Suggest.LocalMulti.prototype.getInputText=function(){var a=this.getLastTokenPos();if(a==-1){return this.input.value}else{return this.input.value.substr(a+1)}};Suggest.LocalMulti.prototype.setInputText=function(a){var b=this.getLastTokenPos();if(b==-1){this.input.value=a}else{this.input.value=this.input.value.substr(0,b+1)+a}};Suggest.LocalMulti.prototype.getLastTokenPos=function(){return this.input.value.lastIndexOf(this.delim)};