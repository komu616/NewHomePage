(function(c){var a,b,d;c.fn.tagName=function(){return this.get(0).tagName};a=c.fn.formLabels=function(e){b=c.extend({excludeElts:"",refreshOnResize:false,safemode:false,labelParent:"form",semantic:true},e);var f=0;d=c("textarea, input[type='email'], input[type='text'], input[type='password']").not(b.excludeElts).filter(":visible[title]");if(d.length&&!b.safemode){d.each(function(){var n=c(this);var m="";var q,l,k,h;if(this.value==""&&this.title!=""){if(b.labelParent=="form"){k=n.closest("form");h="<label/>"}else{k=c(b.labelParent);h="<span/>"}if(k.css("position")=="static"){k.css({position:"relative"})}var p=this.title;var o,j,i;var g={top:parseFloat(n.css("padding-top"))+1,left:(parseFloat(n.css("padding-left"))<2)?2:parseFloat(n.css("padding-left"))+1};if(n.tagName()=="TEXTAREA"){o="left top";i="left top";j=g.left+" "+g.top}else{o="left center";i="left center";j=g.left+" 0"}if(c.browser.mozilla){q=n.css("background-color");l=n.css("background-image");if(l=="none"){if(q!=""){m=q}else{m="#fff"}}}var r=c(h,{css:{"font-family":n.css("font-family"),"font-size":n.css("font-size"),"font-style":n.css("font-style"),"font-weight":n.css("font-weight"),"text-shadow":(c.support.opacity)?n.css("text-shadow"):"","line-height":n.css("line-height"),"background-color":m,position:"absolute",top:0,left:0,color:n.css("color"),"-moz-user-select":"none","-webkit-user-select":"none",cursor:"text","z-index":"1"},id:"spanLabel"+f,"for":(n.attr("id")=="")?"":n.attr("id"),"class":"fLabel",html:p,click:function(){n.trigger("focus");return false}});if(b.semantic&&b.labelParent=="form"){n.before(r)}else{r.appendTo(k)}r.position({my:i,at:o,of:n,offset:j,collision:"none"});n.data({spanID:"#spanLabel"+f,my:i,at:o,offset:j})}f++});d.bind("focus blur change cut paste input keyup",function(h){var g=c(c(this).data("spanID"));if(h.type=="focus"){if(this.title!=""&&this.value==""){g.stop().fadeTo(300,0.2)}}if(h.type=="blur"){if(this.title!=""){if(this.value==""){g.stop().fadeTo(300,1,function(){if(!c.support.opacity){this.style.removeAttribute("filter")}})}else{g.stop().fadeOut(300)}}}if(h.type=="change"||h.type=="cut"||h.type=="paste"||h.type=="input"||h.type=="keyup"){if(this.title!=""){g.stop().fadeOut(300)}if(this.value==""){g.stop().fadeTo(100,0.2)}}});if(b.refreshOnResize){c(window).bind("resize",function(){a.refreshLabels(d)})}}if(d.length&&b.safemode){d.val(function(h,g){if(g==""){return this.title}else{return g}});d.bind("focus blur",function(g){if(g.type=="focus"){if(this.value==this.title){this.value=""}}else{if(this.value==""){this.value=this.title}}});c("input:image, button, input:submit").click(function(){c(this.form.elements).each(function(){if(this.type=="email"||this.type=="text"||this.type=="textarea"||this.type=="password"){if(this.value==this.title&&this.title!=""){this.value=""}}})})}};a.refreshLabels=function(){d.each(function(){var e=c(this);var f=c(e.data("spanID"));f.position({my:e.data("my"),at:e.data("at"),of:e,offset:e.data("offset"),collision:"none"})})}})(jQuery);